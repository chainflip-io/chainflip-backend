name: Check block time for production builds

on:
  workflow_call:

permissions:
  packages: read
  contents: read

jobs:
  check-blocktime:
    runs-on: namespace-profile-default
    steps:
      - name: Download Binaries ğŸ“¥
        uses: actions/download-artifact@fa0a91b85d4f404e444e00e005971372dc801d16
        with:
          name: chainflip-backend-bin

      - name: Make Binaries Executable ğŸ› ï¸
        run: |
          chmod +x chainflip-*

      - name: Run Test ğŸ§ª
        shell: bash
        run: ./ci/scripts/check_blocktime.sh --binary-root-path .
