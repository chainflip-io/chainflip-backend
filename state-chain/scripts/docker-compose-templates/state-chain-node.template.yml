version: "3"

services:

  cf-substrate-node-${NODE_NAME}:
    build: ./.
    image: cf-state-chain-node
    networks:
      chainflip:
        ipv4_address: "${SUBNET_BASE}.${NETWORK_SUFFIX}"
    expose:
      # ws
      - "9944"
      # prometheus
      - "9615"
      # p2p protocol
      - "30333"
      # rpc server
      - "9933"
    ports:
      - "9615"
      - "9933"
      - "9944"
      - "30333"
    command: ./target/release/state-chain-node --dev --ws-external --${NODE_NAME}
