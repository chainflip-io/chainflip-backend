version: '3'

services:
  polkadot:
    container_name: polkadot
    image: parity/polkadot
    ports:
      - 30333:30333 # p2p port
      - 9933:9933 # rpc port
      - 9945:9944 # ws port
    volumes:
      - ./chainspec.json:/chainspec.json
    command: [
      "--name=PolkaDocker",
      "--rpc-methods=unsafe",
      "--ws-external",
      "--rpc-external",
      "--rpc-cors=all",
      "--chain=/chainspec.json",
      "--validator",
      "--force-authoring",
      "--alice",
      "--state-pruning=archive",
      "--blocks-pruning=archive"
    ]
